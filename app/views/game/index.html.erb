<% if @fight.present? %>
<div class="main-section h-100 column is-two-thirds grid is-vertical flex-space-between">
  <div class="column is-shrink">
    <% @fight.character_fights.each do |character_fight| %>
        <%= render 'character_fights/character_fight_gm', is_current: @fight.current_player === character_fight, character_fight: character_fight %>
    <% end %>
  </div>
  <div class="column is-shrink grid flex-space-between">
    <%= link_to characters_path, class: 'button is-rounded is-shrink' do %>
      <i class="iconoir-plus-circle me-1"></i> Ajouter un personnage
    <% end %>

    Tour n°<%= @fight.turn_count %>

    <!-- TODO : Something else than a but with hovering system -->
    <a href="" data-controller="copy-to-clipboard"
      data-action="click->copy-to-clipboard#copy"
      data-copy-to-clipboard-content-value="<%= url_for(:id => @fight.id, action: "show", :only_path => false) %>">
      <i class="iconoir-copy me-1"></i> Copier le lien de partage
    </a>

    <%= button_to next_game_index_path, method: :post, class: 'button is-primary is-rounded is-shrink' do %>
      <i class="iconoir-arrow-right me-1"></i>
      <%= @fight.current_player ? 'Tour suivant' : 'Commencer le combat' %>
    <% end %>
  </div>
</div>
<div class="column h-100 p-0">
  <% if @fight.current_player && @fight.current_player.character.image.attached? %>
    <%= image_tag @fight.current_player.character.image, id: "character-image" %>
  <% end %>
  <%= button_to :logout, method: :post, class: 'button is-rounded is-shrink', id: 'logout-button' do %>
    <i class="iconoir-log-out me-1"></i> Déconnexion
  <% end %>
</div>
<% else %>
  Pas de combat en cours
<% end %>